<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">

    <title>Формат хранения уровней в ROM-файлах</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Формат хранения уровней в ROM-файлах</h1>
        <h2>Описание формата хранений данных об уровнях</h2>
      </div>
    </header>

    <div class="container">
      <section id="main_content">

<p>
<b>CadEditor</b> - редактор уровней для множества игр под разные платформы (NES, Sega Mega Drive, GBA).
</p>
<p>
<h3>Список форматов данных уровней в играх, поддерживаемых редактором.</h3>
</p>

<table border=1>

<tr>
<th width=30%>Название игры</th>
<th>Формат блоков</th>
<th>Формат макроблоков</th>
<th>Формат экранов</th>
</tr>

<tr>
<td>

<table>
<tr><td>Darkwing Duck</td></tr>
<tr><td>Little Mermaid</td></tr>
<tr><td>Tale Spin</td></tr>
<tr><td>Chip & Dale</td></tr>
<tr><td>Megaman 3</td></tr>
<tr><td>Megaman 4</td></tr>
<tr><td>Megaman 5</td></tr>
<tr><td>Mighty Final Fight</td></tr>
<tr><td>Adventure in the Magic Kingdom</td></tr>
</table>

</td>
<td>SoA(2x2 + palByte1)</td>
<td>AoS(2x2)</td>
<td>AoS(8x8)</td>
<tr>

<tr>
<td>Duck Tales</td>
<td>SoA(2x2 + palByte1)</td>
<td>AoS(2x2)</td>
<td>AoS(8x8)<br>
<i>прим.1</i>
</td>
<tr>

<tr>
<td>Duck Tales 2</td>
<td>SoA(2x2 + palByte1p)</td>
<td>SoA(2x2)</td>
<td>AoS(8x8)</td>
<tr>

<tr>
<td>Chip & Dale 2</td>
<td>SoA(2x2 + palByte1p)</td>
<td>-</td>
<td>AoS(16x15)</td>
<tr>

<tr>
<td>
Tiny Toon Adventures
</td>
<td>SoA(2x2)T</td>
<td>SoA(2x2 + palByte4)</td>
<td>AoS(8x6)</td>
<tr>

<tr>
<td>
Flintstones RoD&H
</td>
<td>AoS(2x2)T + palByte1</td>
<td>AoS(4x4)T</td>
<td>(-)T</td>
<tr>

<tr>
<td>
Flintstones SaDP
</td>
<td>AoS(2x2)T + palByte1</td>
<td>AoS(2x4)T</td>
<td>(-)T</td>
<tr>

<tr>
<td>
Jungle Book
</td>
<td>SoA(2x2 + palByte1)x2</td>
<td>AoS(2x2)x2</td>
<td>-</td>
<tr>

<tr>
<td>
<table>
<tr><td>Tom & Jerry</td></tr>
<tr><td>Terminator 2</td></tr>
</table>
</td>
<td>SoA(2x2 + palByte1)</td>
<td>-</td>
<td>-</td>
<tr>

<tr>
<td>
Little Nemo
</td>
<td>SoA(2x2 + palByte1)</td>
<td>SoA(2x2)</td>
<td>AoS(8x8)</td>
<tr>

<tr>
<td>
Rockin' Kats
</td>
<td>AoS(2x2 + palByte1)</td>
<td>AoS(1x4)-><br>
AoS(4x1)-><br>
AoS(2x1)</td>
<td>AoS(3x2)</td>
<tr>

<tr>
<td>
Super Spy Hunter
</td>
<td>AoS(2x2 + palByte1)</td>
<td>AoS(2x2)</td>
<td>AoS(8x8)</td>
<tr>

<tr>
<td>
<table>
<tr><td>Battletoads</td></tr>
<tr><td>Battletoads & DD</td></tr>
<tr><td>Mickey's Adveture in Numberland</td></tr>
<tr><td>Alien 3</td></tr>
<tr><td>Darkman</td></tr>
</table>
</td>
<td>AoS(4x4) + palByte4</td>
<td>-</td>
<td>-</td>
<tr>

<tr>
<td>
<table>
<tr><td>TMNT 3</td></tr>
<tr><td>Contra Force</td></tr>
<tr><td>Super C</td></tr>
<tr><td>Adventure Island 2</td></tr>
<tr><td>Adventure Island 3</td></tr>
</table>
</td>
<td>AoS(4x4) + palByte4</td>
<td>-</td>
<td>AoS(8x8)</td>
<tr>

<tr>
<td>
Mickey Mouse 3
</td>
<td>AoS(2x2) + palByte1</td>
<td>AoS(2x2)</td>
<td>AoS(8x6)</td>
<tr>

<tr>
<td>
Moon Crystal
</td>
<td>AoS(2x2)</td>
<td>-</td>
<td>AoS(16x15), palByteX</td>
<tr>

<tr>
<td>
Challenger
</td>
<td>AoS(4x4) + palByte4</td>
<td>AoS(2x2)</td>
<td>-</td>
<tr>

<tr>
<td>
Felix the Cat
</td>
<td>AoS(2x2 + palByte1)</td>
<td>-</td>
<td>Comp(-)</td>
<tr>

<tr>
<td>
Jurassic Park
</td>
<td>AoS(2x2)</td>
<td>-</td>
<td>Comp(-), palByteX</td>
<tr>

<tr>
<td>
Ninja Cat
</td>
<td>AoS(2x2)</td>
<td>AoS(2x2) + palByte4</td>
<td>AoS(8x5)T</td>
<tr>

<tr>
<td>
Shadow of the Ninja
</td>
<td>AoS(2x2)T</td>
<td>AoS(mix(2x2, palByte4))T</td>
<td>AoS(8x8)</td>
<tr>

<tr>
<td>
Little Samson
</td>
<td>const(2x2)</td>
<td>AoS(mix(2x2, palByte4))</td>
<td>AoS(8x8)</td>
<tr>

<tr>
<td>
Gun Smoke
</td>
<td>const(2x2)</td>
<td>AoS(2x2 + palByte4)</td>
<td>(-)Iy</td>
<tr>

<tr>
<td>
New Ghostbusters 2
</td>
<td>AoS(2x2 + palByte1)</td>
<td>-</td>
<td>AoS(16x15)</td>
<tr>

<tr>
<td>
Captain America
</td>
<td>AoS(2x2) + palByte1</td>
<td>-</td>
<td>AoS(16x15)</td>
<tr>

<tr>
<td>
Shatterhand
</td>
<td>AoS(2x2)T + palByte1</td>
<td>Aos(2x2)T</td>
<td>AoS(8x8)</td>
<tr>

<tr>
<td>
Three Eyes Story
</td>
<td>AoS(2x2) + palByte1</td>
<td>Aos(2x2)T</td>
<td>AoS(8x8)</td>
<tr>

<tr>
<td>
Raf World
</td>
<td>AoS(2x2) + palByte1</td>
<td>Aos(2x2)</td>
<td>AoS(8x8)</td>
<tr>

<tr>
<td>
Ninja Gaiden
</td>
<td>AoS(2x2)T</td>
<td>Aos(2x2)T + palByte4</td>
<td>(-)T</td>
<tr>

<tr>
<td>
Ninja Gaiden 3
</td>
<td>AoS(2x2)</td>
<td>Aos(2x2) + palByte4</td>
<td>(-)T</td>
<tr>

<tr>
<td>
<table>
<tr><td>Yo-Noid</td></tr>
<tr><td>Jackie Chan Action Kung Fu</td></tr>
</table>
</td>
<td>AoS(4x4) + palByte4</td>
<td>-</td>
<td>(-)T</td>
<tr>

<tr>
<td>
Jackal
</td>
<td>AoS(4x4)Iy + palByte4</td>
<td>-</td>
<td>(-)Iy</td>
<tr>

<tr>
<td>
<table>
<tr><td>Power Blade</td></tr>
<tr><td>Power Blade 2</td></tr>
<tr><td>Batman Returns</td></tr>
<tr><td>TMNT</td></tr>
<tr><td>TMNT 2</td></tr>
<tr><td>Bucky O'Hare</td></tr>
</table>
</td>
<td>AoS(4x4) + palByte4</td>
<td>-</td>
<td>AoS(8x6)</td>
<tr>

<tr>
<td>
Monster in my pocket
</td>
<td>AoS(4x4) + palByte4</td>
<td>-</td>
<td>AoS(8x6); AoS(8x8)</td>
<tr>

<tr>
<td>
Batman
</td>
<td>AoS(4x2)</td>
<td>-</td>
<td>AoS(8x15), palByteX</td>
<tr>

<tr>
<td>
Ninja Crusaders
</td>
<td>AoS(4x1)</td>
<td>-</td>
<td>AoS(8x24), palByteX</td>
<tr>

<tr>
<td>
Dragon Fighter
</td>
<td>AoS(2x2 + palByte1)T</td>
<td>AoS(2x2 + palByte1)T</td>
<td>(-)T</td>
<tr>

<tr>
<td>
Castlevania
</td>
<td>AoS(4x4 + palByte4)</td>
<td>-</td>
<td>(8x6)T</td>
<tr>

<tr>
<td>
Addams Family
</td>
<td>AoS(1x20); AoS(1x6)</td>
<td>-</td>
<td>AoS(-), palByteX</td>
<tr>

<tr>
<td>
Abadox
</td>
<td>AoS(4x30 + palByte30)</td>
<td>-</td>
<td>AoS(-)</td>
<tr>

<tr>
<td>
Captain Planet
</td>
<td>AoS(4x8 + palByte8)</td>
<td>-</td>
<td>AoS(-)</td>
<tr>

<tr>
<td>
<table>
<tr><td>Contra Spirits</td></tr>
<tr><td>Mickey Mania</td></tr>
</table>
</td>
<td>AoS(2x2)</td>
<td>-</td>
<td>AoS(16x15), palByteX</td>
<tr>

<tr>
<td>
Takeshi no Chousenjou
</td>
<td>AoS(2x2)T</td>
<td>-</td>
<td>AoS(15x2)T, palByteX</td>
<tr>

</table>

<p>
<h3>Обозначения</h3>
<b>(NxM)</b> - структура из N единиц в ширину и M в ширину.<br>
<b>()T</b> - структура хранится в транспонированном виде.<br>
<b>()Iy</b> - структура хранится в инвертированном по оси Y виде.<br>
<b>()x2</b> - игра содержит по две копии наборов данных на уровень.<br>
<b>AoS()</b> - структуры хранятся последовательно, одна за другой. <br>
<b>SoA()</b> - структуры хранятся массивами из отдельных частей (отдельный массив из всех 1х элементов структуры, затем отдельный массив из всех 2х элементов структуры и т.д.).<br>
<b>Const()</b> - индексы элементов структуры не хранятся, а вычисляются из индексов самой структуры.<br>
<b>SoA(NxM + palByteX)</b> - массивы из отдельных частей структуры из NxM элементов, а затем массив из частей palByteX, в котором элементы означают доп. данные для соотвествующих индексу структур.<br>
<b>AoS(NxM)+ palByteX</b> - последовательное описание структур размером NxM, а затем описание массива из частей palByteX, в котором элементы означают доп. данных для соотвествующих индексу структур<br>
<b>(NxM)->(PxQ)</b> - структура PxQ, образованная из P элементов в ширину и Q элементов в высоту, где элементы структуры сами являются структурами из NxM элементов.<br>
<b>AoS(NxM),palByteX</b> - описание бит палитры отдельным слоем от структур.<br>
<b>Comp()</b> - данные в ROM сжаты каким-либо образом.<br>
<b>AoS(NxM); AoS(PxQ)</b> - в игре используются и структуры размером NxM, и структуры размером PxQ элементов в разных местах.<br>
<b>mix(NxM, palByteX)</b> - биты палитры хранятся в тех же байтах, что и индексы элементов структуры.<br>
</p>

<p>
<h3>Способы хранения бит палитры</h3>
<b>palByte1</b> - биты палитры хранятся по 2 бита в байте. Дополнительные 6 бит байта в зависимости от игры могут использоваться для хранения доп. информации (тип физики блока) или не использоваться никак.<br>
<b>palByte1p</b> - биты палитры хранятся сжатыми по 4 штуки в одном байте для 4 отдельных блоков<br>
<b>palByte4</b> - биты палитры хранятся в одном байте по 4 штуки для 4х блоков, связанных в один макроблок или для блока в 4x4 тайла.<br>
</p>

<p>
<h3>Примечения</h3>
<b><i>прим.1</i></b> Отдельно хранятся старшие биты номеров блоков (игра поддерживает до 512 блоков на уровень)<br>
</p>

<p>
<h3>Todo</h3>
<ul>
<li>Добавить описание игр на SMD</li>
<li>Добавить описание способов кодирования физики блоков</li>
</ul>
</p>

  </section>
  </div>
  
   <div class="dashed">
   <div class="container" align="center">
   <a href="index.html" align="right">Назад</a>
   </div>
   </div>
  </body>
</html>
